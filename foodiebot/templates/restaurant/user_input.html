<head>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script type="module" src="{{url_for('static', filename='index.js')}}">
    </script>

</head>




{% extends 'base.html' %}


{% block header %}

<h1>{% block title %}選擇地點{% endblock %}</h1>

{% endblock %}


{% block content %}


<script> var myLocation;</script>

<div id="map"></div>


<script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAd5FeE-Wb0Bc9r2uHPZngmVuOIi1cYJT8&callback=initMap&v=weekly&language=ZH-TW"
    defer>
    </script>


<p></p>



<button id="postButton">確定地點</button>
<script>
    const url = {{ url_for('restaurant.user_input') | tojson}};

    document.addEventListener('DOMContentLoaded', function () {
        const postButton = document.getElementById('postButton');
        postButton.addEventListener('click', () => {

            let data = new FormData;
            data.append("location", JSON.stringify(myLocation))

            fetch(url, {
                "method": "POST",
                "body": data,
            }).then(
                response => {
                    if (response.redirected) {
                        window.location = response.url
                    } else {
                        alert("請選擇地點!")
                    }
                }
            );
        });
    });

</script>





{% endblock %}